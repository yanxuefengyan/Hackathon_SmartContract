# 智合同项目本地开发测试计划

## 一、项目现状分析

1. **当前目录**：`d:\0002Hackathon2025\pr03\Hackathon_SmartContract`
2. **现有文件**：仅包含文档文件（readme.md, tech-stack.md, docs/setup.md等），无实际代码
3. **技术栈**：
   - 前端：React 18.x + TypeScript 5.x + Ant Design 5.x
   - 后端：Node.js 18.x + NestJS 10.x
   - AI服务：Python 3.10.x + FastAPI
   - 移动端：React Native 0.72.x + Expo 48.x

## 二、开发计划

### 1. 环境搭建

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 1.1 | 检查Node.js版本 | `node -v` | 版本≥16.0.0 |
| 1.2 | 检查npm版本 | `npm -v` | 版本≥8.0.0 |
| 1.3 | 检查Python版本 | `python -V` | 版本≥3.8.0 |
| 1.4 | 检查Docker版本 | `docker -v` | 版本≥20.10.0 |
| 1.5 | 检查Git版本 | `git -v` | 版本≥2.20.0 |

### 2. 项目初始化

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 2.1 | 创建项目目录结构 | `mkdir -p web mobile server agent-service mcp-service ai-service knowledge-base` | 生成完整项目目录 |
| 2.2 | 初始化Web端 | `cd web && npm create vite@latest . -- --template react-ts` | 创建React+TypeScript项目 |
| 2.3 | 初始化后端服务 | `cd ../server && npm init -y && npm install -g @nestjs/cli && nest new .` | 创建NestJS项目 |
| 2.4 | 初始化AI服务 | `cd ../ai-service && python -m venv venv && pip install fastapi uvicorn` | 创建FastAPI项目 |
| 2.5 | 初始化移动端 | `cd ../mobile && npx create-expo-app . --template blank-typescript` | 创建Expo+TypeScript项目 |

### 3. 依赖安装

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 3.1 | 安装Web端依赖 | `cd web && npm install antd @reduxjs/toolkit react-redux react-router-dom axios draft-js pdfjs-dist` | 安装完成所有Web端依赖 |
| 3.2 | 安装后端依赖 | `cd ../server && npm install @nestjs/common @nestjs/core @nestjs/platform-express @nestjs/jwt @nestjs/config` | 安装完成所有后端依赖 |
| 3.3 | 安装AI服务依赖 | `cd ../ai-service && pip install -r requirements.txt` | 安装完成所有AI服务依赖 |
| 3.4 | 安装移动端依赖 | `cd ../mobile && npm install react-native-vision-camera react-native-tts react-native-fs @react-navigation/native` | 安装完成所有移动端依赖 |

### 4. 配置文件创建

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 4.1 | 创建环境变量文件 | `cp .env.example .env`（各服务目录） | 生成所有服务的.env文件 |
| 4.2 | 配置文心大模型API | 在.env文件中添加BAIDU_API_KEY和BAIDU_SECRET_KEY | API密钥配置完成 |
| 4.3 | 初始化文件存储目录 | `mkdir -p data/files data/index`（server目录） | 创建文件存储和索引目录 |

### 5. 启动服务

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 5.1 | 启动后端服务 | `cd server && npm run dev` | 后端服务运行在http://localhost:3001 |
| 5.2 | 启动AI服务 | `cd ../ai-service && python app.py` | AI服务运行在http://localhost:5000 |
| 5.3 | 启动Web端 | `cd ../web && npm run dev` | Web端运行在http://localhost:3000 |
| 5.4 | 启动移动端 | `cd ../mobile && npm start` | 移动端可通过Expo Go扫码运行 |

### 6. 功能测试

| 步骤 | 任务 | 工具/命令 | 预期结果 |
|------|------|-----------|----------|
| 6.1 | API接口测试 | `curl -X POST http://localhost:3001/api/auth/register -H "Content-Type: application/json" -d '{"email":"test@example.com","password":"password123","name":"Test User"}'` | 用户注册成功 |
| 6.2 | Web端功能测试 | 访问http://localhost:3000 | 页面正常加载，可注册/登录 |
| 6.3 | 移动端功能测试 | 使用Expo Go扫码 | App正常运行，可注册/登录 |

## 三、注意事项

1. **第三方服务依赖**：需提前注册获取文心大模型API和文心OCR API密钥
2. **环境变量配置**：确保各服务目录下的.env文件配置正确
3. **端口冲突**：确保各服务使用的端口不冲突
4. **文件权限**：确保文件存储目录具有正确的读写权限
5. **Docker环境**：如使用Docker部署，需确保Docker服务正常运行

## 四、预期成果

1. 成功搭建智合同项目的本地开发环境
2. 各服务正常启动，无错误日志
3. Web端和移动端可正常访问和使用
4. API接口可正常调用
5. 核心功能（合同生成、审核、审批）可正常测试

## 五、后续优化

1. 集成电子签章服务
2. 完善AI模型调用逻辑
3. 实现文件管理系统
4. 开发AGENT和MCP服务
5. 优化移动端体验

通过以上步骤，我们可以在本地电脑上成功搭建智合同项目的开发环境，并进行基本功能测试。